def get_recommendations(title, num_recommendations=5):
    if title not in movie_indices:
        return [f"Movie '{title}' not found in the dataset."]
    
    # Get the movie index
    idx = movie_indices[title]

    # Calculate similarity scores for the movie
    sim_scores = list(enumerate(cosine_sim[idx, :]))  # Use correct indexing

    # Sort by similarity score
    sim_scores = sorted(sim_scores, key=lambda x: x[1], reverse=True)

    # Get the top recommendations (excluding the movie itself)
    sim_scores = sim_scores[1:num_recommendations + 1]
    
    # Retrieve the movie titles for the recommendations
    recommended_movies = [credits_df.iloc[i[0]]['title'] for i in sim_scores]
    return recommended_movies
